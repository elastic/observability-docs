[[create-alerts]]
= Alerting

[IMPORTANT]
====
Make sure alerting is already set up in {kib}. For details, see
{kibana-ref}/alerting-setup.html[Setup and prerequisites].
====

Alerting enables you to detect complex conditions defined by a *rule*
within the Logs, Metrics, Uptime, and APM apps. When a condition is met, the rule
tracks it as an *alert* and responds by triggering one or more *actions*.

Alerts and rules related to {observability} apps including Logs, Metrics, Uptime, and APM can be managed in the {observability} UI.
You can also manage {observability} app rules alongside rules for other apps from the {kibana-ref}/create-and-manage-rules.html[{kib} Management UI].

[discrete]
[[create-alerts-rules]]
== Create rules

The first step when setting up alerts is to create a rule.
To create and manage rules related to {observability} apps,
go to the {observability} *Alerts* page and click *Manage Rules* to navigate to the {observability} Rules page.

You can also create rules directly from the Logs, Metrics, Uptime, and APM apps without leaving the app by
clicking *Alerts and rules* and selecting a rule, or you can select *Manage Rules* to go to the {observability} Rules page.

[role="screenshot"]
image::images/create-alerts-manage-rules.png[Elastic {observability} Rules page]

From the {observability} Rules page, you can manage rules for {observability} apps, including:

* Creating a new rule
* Editing or deleting existing rules
* Updating the status of existing rules (Enabled, Disabled, or Snoozed indefinitely)

NOTE: The {observability} Rules page allows you to set a rule to be "Snoozed indefinitely".
To snooze a rule for a specific time period, you must use the centralized {kibana-ref}/create-and-manage-rules.html[{rules-ui} page].

Extend your rules by connecting them to actions that use built-in *connectors* for email,
{ibm-r}, Index, JIRA, Microsoft Teams, PagerDuty, Server log, {sn} ITSM, and Slack.
Also supported is a powerful webhook output letting you tie into other third-party systems.
Connectors allow actions to talk to these services and integrations.

Learn how to create specific types of rules:

* <<logs-threshold-alert,Logs threshold rule>>
* <<infrastructure-threshold-alert,Infrastructure threshold rule>>
* <<metrics-threshold-alert,Metrics threshold rule>>
* <<monitor-status-alert,Monitor status rule>>
* <<tls-certificate-alert,TLS certificate rule>>
* <<duration-anomaly-alert,Uptime duration anomaly rule>>

[discrete]
[[create-alerts-alert]]
== View and manage alerts

The *Alerts* page lists all your
alerts that have met a condition defined by a rule you created
using the Logs, Metrics, Uptime, or APM apps.

Learn more about viewing and managing alerts in <<view-observability-alerts>>.

[role="screenshot"]
image::images/alerts-page.png[Elastic {observability} Alerts page]

IMPORTANT: Not all the predefined rules in {stack-manage-app} will generate and
list an alert on the {observability} Alerts page.
Only alerts generated by rules relating to Logs, Metrics, Uptime, and APM
can be viewed on the Alerts page.

[discrete]
[[create-alerts-configure]]
== Configure alerts

You may want to disable writing to specific {observability} alert indices or disable all alerts and remove the Alerts page altogether.
You can do this in {kib} settings.

If you are using our https://www.elastic.co/cloud/elasticsearch-service[hosted {ess}] on {ecloud},
you'll edit the {kib} user settings:

. Select your deployment on the home page, and from your deployment menu go to the *Edit* page.
. In the *{kib}* section, click *Edit user settings*, and add the desired settings (detailed below).
. Click *Back*, and then click *Save*. The changes are automatically appended to the `kibana.yml` configuration file for your instance.

If you have a self-managed {stack}, you'll edit the settings in your `kibana.yml` file.

[discrete]
[[create-alerts-disable-some]]
=== Disable writing to specific alert indices

To disable writing to specific {observability} alerts-as-data indices
while continuing to write to others, use `xpack.ruleRegistry.write.disabledRegistrationContexts`.

You can disable writing to alert indices for:

* Logs (`observability.logs`)
* Metrics (`observability.metrics`)
* APM (`observability.apm`)
* Uptime (`observability.uptime`)

NOTE: Disabling writing to the indices of one of the {observability} apps listed above will affect _all_ rule types of the corresponding app.
For example, disabling writing to uptime alert indices will affect _all_ uptime rule types including monitor status and TLS rule types.

For example, to disable writing to Logs alert indices, you would add the following to your {kib} settings:

[source,yml]
----
xpack.ruleRegistry.write.disabledRegistrationContexts : ['observability.logs']
----

To disable writing to both Logs and Uptime alert indices, you would use: 

[source,yml]
----
xpack.ruleRegistry.write.disabledRegistrationContexts : ['observability.logs', 'observability.uptime']
----

[discrete]
[[create-alerts-remove-page]]
=== Remove the Alerts page

To disable writing to all alert indices and remove the Alerts page from {kib} altogether, use the following settings:

[source,yml]
----
xpack.ruleRegistry.write.enabled: 'false'
xpack.observability.unsafe.alertingExperience.enabled: 'false'
----


include::logs-threshold-alert.asciidoc[leveloffset=+1]

include::infrastructure-threshold-alert.asciidoc[leveloffset=+1]

include::metrics-threshold-alert.asciidoc[leveloffset=+1]

include::monitor-status-alert.asciidoc[leveloffset=+1]

include::uptime-tls-alert.asciidoc[leveloffset=+1]

include::uptime-duration-anomaly-alert.asciidoc[leveloffset=+1]

include::view-observability-alerts.asciidoc[leveloffset=+1]
