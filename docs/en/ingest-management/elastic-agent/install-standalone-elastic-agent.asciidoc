[[install-standalone-elastic-agent]]
= Install standalone {agent}s (advanced users)

To run an {agent} in standalone mode, you install the agent on each
host you want to monitor and manually configure the agent locally on the
system where itâ€™s installed. You are responsible for managing and upgrading the
agents. This approach is recommended for advanced users only.

We recommend using <<install-fleet-managed-elastic-agent,{fleet}-managed {agent}s>>,
when possible, because it makes the management and upgrade of your agents
considerably easier. 

IMPORTANT: Standalone agents are unable to update to new integration package
versions automatically. When you update the package version in {kib}, you'll
need to update the standalone policy manually.

To install and run {agent} standalone:

. On your host, download and extract the installation package.
+
--
// tag::install-elastic-agent[]

include::{tab-widgets}/download-widget.asciidoc[]

// end::install-elastic-agent[]
--
+
Refer to the https://www.elastic.co/downloads/elastic-agent[download page] for other
installation options.

. Modify settings in the `elastic-agent.yml` as required.
+
--
If you've already set up {fleet} in {kib}, you can use it to generate a
standalone configuration.

// Begin collapsed section
[%collapsible]
.Learn how
====
. Log in to {kib} and go to **Management > Fleet**.

. On the **Agents** tab, click **Add agent** and click **Run standalone**.

. Follow the in-product instructions.
+
[role="screenshot"]
image::images/kibana-fleet-policies-default-yaml.png[{fleet} showing default agent policy in YAML format]

NOTE: The policy generated by {fleet} already contains the correct {es} address
and port for your setup. If you run everything locally, the address is
`127.0.0.1:9200`. If you use our {ess-product}[hosted {ess}] on {ecloud},
you can get the {es} endpoint URL by copying it from the overview page of your
deployment.
====

// End collapsed section
--
. In the `elastic-agent.yml` policy file, under `outputs`, modify the
`ES_USERNAME` and `ES_PASSWORD` settings for {es}. For example:
+
[source,yaml]
----
[...]
outputs:
  default:
    type: elasticsearch
    hosts:
      - 'http://localhost:9200'
    username: ES_USERNAME <1>
    password: ES_PASSWORD
[...]
----
<1> This user must have the privileges shown in the following example.
+
To create a role that has the privileges needed by the {agent} user, go to
**Management > Dev Tools** in {kib} and run:
+
[source,console]
----
POST /_security/role/standalone_agent
{
  "cluster": ["monitor"],
  "indices": [
    {
      "names": ["logs-*", "metrics-*", "events-*", ".ds-logs-*", ".ds-metrics-*", ".ds-events-*"],
      "privileges": ["write", "create_index", "indices:admin/auto_create"]
    }
  ]
}
----
+
Make sure you assign this role to the user in {kib}.

. From the agent directory, run the following commands to install {agent}
and start it as a service.
+
NOTE: On macOS, Linux (tar package), and Windows, run the `install` command to
install {agent} as a managed service and start the service. The DEB and RPM
packages include a service unit for Linux systems with
systemd, so just enable then start the service.
+
--
include::{tab-widgets}/run-standalone-widget.asciidoc[]
--

Refer to <<installation-layout>> for the location of installed {agent} files.

Because {agent} is installed as an auto-starting service, it will restart
automatically if the system is rebooted.

For additional configuration options, refer to <<elastic-agent-configuration>>.

If you run into problems, refer to <<fleet-troubleshooting>>.
