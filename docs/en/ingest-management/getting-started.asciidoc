[[ingest-management-getting-started]]
[role="xpack"]
= Quick start: Get logs and metrics into the {stack}

++++
<titleabbrev>Quick start</titleabbrev>
++++

beta[]

This guide describes how to use the {ingest-management} capabilities in the
{stack} to:

* Collect logs and metrics from systems and services across your organization
* Send the data to the {stack}
* Explore and visualize the data in real-time

For feedback and questions, please contact us in the {im-forum}[discuss forum].

[discrete]
[[ingest-manager-prereqs]]
== Prerequisites

Before you begin, please read <<ingest-management-limitations>>.

You need {es} for storing and searching your data, and {kib} for visualizing and
managing it. You can use our
https://www.elastic.co/cloud/elasticsearch-service[hosted {ess}]
on {ecloud} (recommended), or self-manage the {stack} on your own hardware.

Here's what you need for each deployment type:

include::{tab-widgets}/prereq-widget.asciidoc[]

[discrete]
[[install-integration]]
== Step 1: Add integrations

{ingest-manager} provides _integrations_ that bundle various assets needed to
ingest and visualize data.

In this guide, we assume that you have `nginx` running on some of your
infrastructure, and want to collect logs and metrics from it. To do so:

. Log in to {kib} and go to **Management > {ingest-manager}**.
+
[role="screenshot"]
image::images/kibana-ingest-manager-start.png[{ingest-manager} in {kib}]

. In {ingest-manager}, click the **Integrations** tab and use the search bar to
find the Nginx integration.
+
[role="screenshot"]
image::images/kibana-ingest-manager-integrations-nginx.png[{ingest-manager} showing Nginx integration]
. Click the Nginx integration to see more details about it, and then click
**Add Nginx**.
+
[role="screenshot"]
image::images/kibana-ingest-manager-integrations-nginx-overview.png[{ingest-manager} showing Nginx integration overview]

. On the **Add Nginx integration** page, click the default agent configuration
to select it, then scroll down to inspect or change the default settings.

. If your logs are not in the default location, click the down arrow next to
enabled streams and change the **Paths** field. 

. When you're done, click **Save integration**. 
+
[role="screenshot"]
image::images/kibana-ingest-manager-integrations-nginx-add-datasource.png[{ingest-manager} Add data source screen]

. To verify that the integration is installed, click the **Integrations** tab
and then click **Installed Integrations**.
+
The Nginx integration has been installed and should show up in this list. Note
that the **System** and **Elastic Endpoint Security** integrations are installed
by default.
+
[role="screenshot"]
image::images/kibana-ingest-manager-integrations-list-installed.png[{ingest-manager} showing installed integrations]

. Select the **Configurations** tab, and in the list of agent configurations,
click **Default config**.
+
The newly added Nginx integration should appear under **Integrations**.
Note that the `system-1` integration has been created by default.
+
[role="screenshot"]
image::images/kibana-ingest-manager-configurations-default-with-nginx.png[{ingest-manager} showing default agent configuration with nginx-1 datasource]

[discrete]
[[install-run-elastic-agent]]
== Step 3: Install and run {agent}

include::elastic-agent/elastic-agent.asciidoc[tag=agent-install-intro]

include::elastic-agent/install-elastic-agent.asciidoc[tag=install-elastic-agent]

See the https://www.elastic.co/downloads/elastic-agent[download page] for other
installation options.

After the download is complete, decide which mode you want to run in: {fleet}
or standalone. What's the difference?

* With <<agent-fleet-mode,_{fleet} mode_>>, you use {ingest-manager} in {kib} to
define and manage {agent} configurations from a central location.
* With <<agent-standalone-mode,_standalone mode_>>, you configure {agent}
manually on the system where the agent is installed.

[discrete]
[[agent-fleet-mode]]
=== {fleet} mode

To use {fleet} to configure {agent}:

. In {ingest-manager}, click **Settings** and change the defaults, if necessary.
For self-managed installations, set the URLs for {es} and {kib}, including
the http ports, then save your changes.
+
[role="screenshot"]
image::images/kibana-ingest-manager-settings.png[{ingest-manager} settings]

. Enable {fleet}. Click the **{fleet}** tab and click
**Create user and enable {fleet}**.
+
[role="screenshot"]
image::images/kibana-ingest-manager-fleet-enable.png[{ingest-manager} showing prompt to enable {fleet}]

. On the **{fleet}** tab, click **Add agent** and complete the steps under
**Enroll with {fleet}**. Skip the first step because you downloaded {agent}
earlier.

. Select an agent configuration (or accept the default).

. Copy the command for enrolling the agent.
+
The copied command contains your {kib} URL and an enrollment key that was
generated by {ingest-manager}.
+
[role="screenshot"]
image::images/kibana-ingest-manager-fleet-enrol.png[{ingest-manager} showing agent enrollment dialog]

. In the directory where {agent} is installed, run the command you copied. Note
that this command will overwrite the `elastic-agent.yml` file in that directory.
+
--
include::{tab-widgets}/enroll-widget.asciidoc[]
--

. Run {agent}:
+
--
include::{tab-widgets}/run-widget.asciidoc[]
--

. In {ingest-manager}, click **Continue** to go to the **{fleet}**
tab, where you should see the newly enrolled agent.
+
[role="screenshot"]
image::images/kibana-ingest-manager-fleet-agents.png[{ingest-manager} showing enrolled agents]

If you run into problems, see <<ingest-management-troubleshooting>>.

TIP: To unenroll an agent, see <<unenroll-elastic-agent>>.

[discrete]
[[agent-standalone-mode]]
=== Standalone mode (manual configuration)

To configure {agent} manually:

. On the **{fleet}** tab, click **Add agent** and complete the steps under
**Standalone mode**. Skip the first step because you downloaded {agent}
earlier.

. Select an agent configuration (or accept the default).

. Copy the content of the agent configuration and put it into a file named
`elastic-agent.yml` on the system where {agent} is installed.
+
[role="screenshot"]
image::images/kibana-ingest-manager-configurations-default-yaml.png[{ingest-manager} showing default agent configuration in YAML format]
+
NOTE: The configuration file generated by {ingest-manager} already
contains the correct {es} address and port for your setup. If you run everything
locally, the address is `127.0.0.1:9200`. If you use our
https://www.elastic.co/cloud/elasticsearch-service[hosted {ess}] on
{ecloud}, the address corresponds to the {es} endpoint URL that is listed
under **Endpoints** as described in
{cloud}/ec-working-with-elasticsearch.html[Work with {es}].

. Change the {es} username and password in the `outputs` section of the
configuration file:
+
[source,yaml]
----
[...]
outputs:
  default:
    type: elasticsearch
    hosts:
      - 'HOST:PORT'
    username: ES_USERNAME
    password: ES_PASSWORD
datasources:
[...]
----


. Run {agent}:
+
--
include::{tab-widgets}/run-standalone-widget.asciidoc[]
--

[discrete]
[[view-data]]
== Step 4: View your data

In {ingest-manager}, click the **Datasets** tab to inspect the data
that is sent by {agent}. From the **Actions** column, you can navigate to the
dashboards corresponding to the data type that is sent.

[role="screenshot"]
image::images/kibana-ingest-manager-datastreams.png[{ingest-manager} showing data streams list]

//Adding this section for future use. Might be premature to add this for the
//beta release.

[discrete]
== What's next?

Now that you have your logs streaming into {es}, learn how to unify your logs,
metrics, uptime, and application performance data by using
https://www.elastic.co/observability[Elastic {observability}]. 

// Add Javascript and CSS for tabbed panels
include::{tab-widgets}/code.asciidoc[]
