[[fleet-quick-start]]
[role="xpack"]
= Quick start: Get logs and metrics into the {stack}

beta[]

This guide describes how to:

* Collect logs and metrics from systems and services across your organization
* Send the data to the {stack}
* Explore and visualize the data in real-time

For feedback and questions, please contact us in the {forum}[discuss forum].

[discrete]
[[fleet-prereqs]]
== Prerequisites

Before you begin, please read <<fleet-limitations>>.

You need {es} for storing and searching your data, and {kib} for visualizing and
managing it. You can use our
https://www.elastic.co/cloud/elasticsearch-service[hosted {ess}]
on {ecloud} (recommended), or self-manage the {stack} on your own hardware.

Here's what you need for each deployment type:

include::tab-widgets/prereq-widget.asciidoc[]

[discrete]
[[set-up-fleet]]
== Step 1: Set up {fleet}

The best way to get logs, metrics, and security data into the {stack} is
by using {fleet} in {kib}. 

The first time you use {fleet}, you need to set it up: 

. Log in to {kib} and go to **Management > {fleet}**.
+
[role="screenshot"]
image::images/kibana-fleet-start.png[{fleet} in {kib}]

. In {fleet}, click **Settings** and change the defaults, if necessary.
For self-managed installations, set the URLs for {es} and {kib}, including
the http ports, then save your changes.
+
[role="screenshot"]
image::images/kibana-fleet-settings.png[{fleet} settings]

. Enable central management. Click the **Agents** tab and click
**Create user and enable central management**.
+
[role="screenshot"]
image::images/kibana-fleet-enable.png[{fleet} showing prompt to enable central management]

[discrete]
[[add-agent-to-fleet]]
== Step 2: Add an {agent} to {fleet}

include::{beats-repo-dir}/x-pack/elastic-agent/docs/elastic-agent.asciidoc[tag=agent-install-intro]

To send logs and metrics to the {stack}:

. On the **Agents** tab, click **Add agent**, and look at the deployment
instructions under **Enroll in {fleet}**.

. Download the {agent} to your host:
+
--
include::{beats-repo-dir}/x-pack/elastic-agent/docs/install-elastic-agent.asciidoc[tag=install-elastic-agent]

See the https://www.elastic.co/downloads/elastic-agent[download page] for other
installation options.
--

. Under **Choose an agent policy**, notice that the default policy is selected.
The default policy includes a system integration for collecting logs and metrics
from the host system.

. Under **Enroll and start the {agent}**, copy the install command if it's
available for your platform, or make a note of the {kib} URL and enrollment key
that was generated by {fleet}.
+
[role="screenshot"]
image::images/kibana-fleet-enroll.png[{fleet} showing agent enrollment page]

. In the directory where {agent} is installed, install and start {agent}. Note
that this command will overwrite the `elastic-agent.yml` file in that directory.
+
--
include::{beats-repo-dir}/x-pack/elastic-agent/docs/tab-widgets/install-widget.asciidoc[]
--

. In {fleet}, click **Continue** to go to the **Agents** tab, where you should
see the newly enrolled agent.
+
[role="screenshot"]
image::images/kibana-fleet-agents.png[{fleet} showing enrolled agents]

TIP: If the status hangs at Enrolling, go back to the command line where you
started {agent} and make sure the agent is running.

If you run into problems, see <<fleet-troubleshooting>>.

[discrete]
[[view-data]]
== Step 3: Monitor host logs and metrics

View the data sent by {agent}. Right now, {agent} is only sending data about the
host system because you haven't configured the agent to collect data from other
sources yet.

To see host logs and metrics:

. In {fleet}, click the **Data streams** tab.
. In the **Actions** column, navigate to the dashboards corresponding
to the data stream.
+
[role="screenshot"]
image::images/kibana-fleet-datastreams.png[{fleet} showing data streams list]
+
For example, to see host metrics, select one of the system datasets, and
navigate to the [Metrics System] Host overview ECS dashboard:
+
[role="screenshot"]
image::images/host-metrics.png[Host overview dashboard in {kib}]

[discrete]
[[add-nginx-integration]]
== Step 4: Monitor Nginx logs and metrics 
[discrete]

To get started, browse a catalog of integrations, then add an Nginx
integration to the default policy used by your agent. You use policies to manage
settings across a group of agents. An agent policy may contain any number of
integrations for collecting observability data from the various services running
on your host.

NOTE: For these steps, we assume that you have `nginx` running on some of your
infrastructure, and want to collect logs and metrics from it.

. In {fleet}, click the **Integrations** tab and use the search bar to
find the Nginx integration.
+
[role="screenshot"]
image::images/kibana-fleet-integrations-nginx.png[{fleet} showing Nginx integration]
. Click the Nginx integration to see more details about it, then click
**Add Nginx**.
+
[role="screenshot"]
image::images/kibana-fleet-integrations-nginx-overview.png[{fleet} showing Nginx integration overview]

. On the **Add Nginx integration** page, select the default policy.
+
In this guide, you add integrations to the default policy created by
{kib}. After you learn the basics, you can create your own policies and assign
them to agents.
+
[role="screenshot"]
image::images/add-integration.png[{fleet} Add Nginx integration page]

. Under **Configure integration**, click the down arrow next to enabled streams
and make sure the **Paths** are correct for your host. Inspect or change other
settings

. When you're done, save and deploy the changes. 
+
The newly added Nginx integration should appear under **Integrations** in the
default policy, along with the `system-1` integration that you used earlier to
collect host data. 
+
[role="screenshot"]
image::images/kibana-fleet-policies-default-with-nginx.png[{fleet} showing default agent policy with nginx-1 datasource]
+
All {agent}s that use this policy will collect logs and metrics from the
Nginx server and the host.

. To view the data, click the **Data streams** tab.

. In the **Actions** column, navigate to the dashboards corresponding
to the data stream.

//TODO: Add dashboard.

[discrete]
== What's next?

* Now that data is streaming into the {stack}, take your investigation to a
deeper level! Use https://www.elastic.co/observability[Elastic {observability}]
to unify your logs, metrics, uptime, and application performance data.

* Want to protect your endpoints from security threats? Try
https://www.elastic.co/security[{elastic-sec}]. Adding endpoint protection is
just another integration that you add to the agent policy!

* Are your eyes bleary from staring at a wall of screens?
{observability-guide}/create-alerts.html[Create alerts] and find out about
problems while sipping your favorite beverage poolside.

* Want Elastic to do the heavy lifting? Use machine learning to
{observability-guide}/inspect-log-anomalies.html[detect anomalies].

* Got everything working like you want it? Roll out your agent policies to
other hosts by deploying {agent}s across your infrastructure!

// Add Javascript and CSS for tabbed panels
include::tab-widgets/code.asciidoc[]
