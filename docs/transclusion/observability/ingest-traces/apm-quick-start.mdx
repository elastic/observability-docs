
import LogsMetricsGetStartedMonitoringPrereqs from '../logs-metrics-get-started/monitoring-prereqs.mdx'
import ContentEss from '../tab-widgets/add-apm-integration/content/ess.mdx'
import TabWidgetsInstallAgentsWidget from '../../../transclusion/apm/guide/tab-widgets/install-agents-widget.mdx'

This guide describes how to:

* Collect Application Performance Monitoring (APM) data
* Send APM data to the ((stack))
* Explore and visualize the data in real-time

For feedback and questions, please contact us in the [discuss forum](((forum))).

<div id="traces-prereqs"></div>

## Prerequisites

<LogsMetricsGetStartedMonitoringPrereqs />

<div id="add-apm-integration"></div>

## Step 1: Configure the APM integration

((ecloud)) runs a hosted version of ((integrations-server)) that includes the APM integration.

<ContentEss />

<div id="add-apm-integration-agents"></div>

## Step 2: Install APM agents

APM agents are written in the same language as your service.
To monitor a new service, you must install the agent and configure it with a service name,
APM Server host, and Secret token.

* **Service name**: The APM integration maps an instrumented service's name–defined in each ((apm-agent))'s configuration–
    to the index that its data is stored in ((es)).
    Service names are case-insensitive and must be unique.
    For example, you cannot have a service named `Foo` and another named `foo`.
    Special characters will be removed from service names and replaced with underscores (`_`).

* **APM Server URL**: The host and port that APM Server listens for events on.
    This should match the host and port defined when setting up the APM integration.

* **Secret token**: Authentication method for ((apm-agent)) and APM Server communication.
    This should match the secret token defined when setting up the APM integration.

<DocCallOut title="Tip">
You can edit your APM integration settings if you need to change the APM Server URL
or secret token to match your APM agents.
</DocCallOut>

{/* this if directive includes the same file, but changes the file path based on where this guide is built */}

export let apm_integration_docs = false

<DocIf condition={ apm_integration_docs === false }>
<TabWidgetsInstallAgentsWidget />
</DocIf>

<DocIf condition={ apm_integration_docs === true }>
<TabWidgetsInstallAgentsWidget />
</DocIf>

<div id="view-apm-integration-data"></div>

## Step 3: View your data

Back in ((kib)), under ((observability)), select APM.
You should see application performance monitoring data flowing into the ((stack))!

<DocCallOut title="Note">
The built-in `apm_user` role is not compatible with the APM integration
as it only provides read access to `apm-*` indices.
For a list of indices users need access to, refer to
[APM data streams](((apm-guide-ref))/apm-data-streams.html)
</DocCallOut>

image::images/kibana-apm-sample-data.png[((apm-app)) with data]

Not seeing any data? Review our list of [common problems](((apm-guide-ref))/common-problems.html) for helpful tips.

## What's next?

* Now that data is streaming into the ((stack)), take your investigation to a
    deeper level! Use [Elastic ((observability))](https://www.elastic.co/observability)
    to unify your logs, metrics, uptime, and application performance data.

* Want to protect your endpoints from security threats? Try
    [((elastic-sec))](https://www.elastic.co/security). Adding endpoint protection is
    just another integration that you add to the agent policy!

* Are your eyes bleary from staring at a wall of screens?
    [Create alerts](((observability-guide))/create-alerts.html) and find out about
    problems while sipping your favorite beverage poolside.

* Want Elastic to do the heavy lifting? Use ((ml)) to
    [detect anomalies](((observability-guide))/inspect-log-anomalies.html).

* Got everything working like you want it? Roll out your agent policies to
    other hosts by deploying ((agent))s across your infrastructure!

